<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>å‹•ç‰©è²éŸ³æ±‚å¶åˆ†é¡éŠæˆ²</title>
<style>

  body {
    font-family: 'Patrick Hand', cursive, 'Noto Sans TC', sans-serif;
    background: linear-gradient(to bottom, #d0e8d0, #f0f8f0);
    color: #3a4a32;
    padding: 40px;
    margin: 0;
    user-select: none;
  }

  h2 {
    text-align: center;
    font-size: 30px;
    margin-bottom: 50px;
    color: #3a5a40;
    text-shadow: 1px 1px 2px #a4c3a2;
  }

  .container {
    display: flex;
    justify-content: space-around;
    max-width: 900px;
    margin: 0 auto 40px;
  }

  .main-layout {
  display: flex;
  justify-content: center;
  align-items: stretch;   /* è®“ä¸‰æ¬„ç­‰é«˜ */
  gap: 40px;
  max-width: 1200px;
  margin: 0 auto 40px;
  height: 400px;
  min-height: 400px;
}
  .dropzone {
  width: 160px;
  height: 100%;            /* æ’æ»¿çˆ¶å®¹å™¨é«˜åº¦ */
  min-height: unset;
  background: #faf9f4;
  border-radius: 25px;
  box-shadow: 0 8px 15px rgba(90, 110, 60, 0.15);
  border: 2px solid #a9c4a2;
  padding: 25px 20px;
  font-size: 19px;
  color: #476034;
  transition: background-color 0.3s ease;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  margin-top: 0;
}

  .dropzone:hover {
    background-color: #d7e9d7;
    cursor: pointer;
  }

  /* å¡ç‰‡ç¿»é¢å®¹å™¨ */
  .cards {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(2, 1fr);
  gap: 32px;
  width: 480px;
  max-width: 90vw;
  justify-items: center;
  align-items: center;
  margin: 0 0;
  height: 100%; /* è®“ .cards å¡«æ»¿ main-layout */
}

  .card-container {
  perspective: 1200px;
  width: 140px;
  height: 180px;
  cursor: pointer;
  /* è®“æ‹–æ›³æ™‚ä¸å½±éŸ¿ hover */
  position: relative;
}

  .card {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);
  border-radius: 16px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.12);
  user-select: none;
}

  /* ç¿»è½‰æ•ˆæœï¼šhover æˆ– .flipped æ™‚è§€ç™¼ */
.card-container:hover .card,
.card.flipped {
  transform: rotateY(180deg);
}

  /* æ‹–æ›³æ™‚é€æ˜åº¦æç¤º */
  .card.dragging {
    opacity: 0.5;
  }

  /* æ”¾åˆ° dropzone å¾Œå¡ç‰‡éš±è— */
  .card.removed {
    display: none;
  }

  .card-front, .card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 16px;
    backface-visibility: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: 700;
    font-size: 28px;
    color: #fff;
  }

  .card-front {
    background: #77ab59;  /* æ£®æ—ç¶  */
  }

  .card-back {
    background: #f4f9f4;
    transform: rotateY(180deg);
    box-shadow: inset 0 0 20px #a3d397;
  }

  .card-back img {
    max-width: 90%;
    max-height: 90%;
    border-radius: 12px;
    object-fit: contain;
  }

  /* æ‹–æ›³å€é™°å½±æ”¹è®Š */
  .dropzone.dragover {
    background-color: #cce6cc !important;
    border-color: #558855;
  }

  /* æç¤ºçª— */
  .modal {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f9fbed;
    border: 3px solid #92af72;
    border-radius: 20px;
    padding: 30px 35px;
    text-align: center;
    box-shadow: 0 20px 40px rgba(80, 100, 40, 0.2);
    max-width: 320px;
    color: #496129;
    font-size: 18px;
    font-weight: 600;
    z-index: 1000;
    font-family: 'Patrick Hand', cursive, 'Noto Sans TC', sans-serif;
  }

  .modal p {
    margin-bottom: 22px;
  }

  .modal .btn {
    background: #7eab50;
    color: white;
    padding: 10px 25px;
    border: none;
    border-radius: 15px;
    cursor: pointer;
    font-size: 16px;
    box-shadow: 0 5px 12px rgba(50, 80, 30, 0.4);
    transition: background 0.3s ease;
  }

  .modal .btn:hover {
    background: #a0c35f;
  }

  .modal-btn-row {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    margin-top: 30px;
    width: 100%;
    gap: 10px;
  }
  .modal-btn-row .btn {
    min-width: 100px;
  }
</style>
</head>
<body>
<h2>å“ªäº›å‹•ç‰©ä¸»è¦æ˜¯ç”¨è²éŸ³ä¾†æ±‚å¶ï¼Ÿ</h2>

<div style="max-width:700px;margin:0 auto 30px auto;padding:18px 24px 12px 24px;background:#f6fbe9;border-radius:18px;border:1.5px solid #b6d7a8;font-size:20px;line-height:1.7;color:#3a4a32;text-align:center;box-shadow:0 2px 10px rgba(120,160,80,0.07);">
  è«‹å°‡ä¸‹æ–¹çš„å‹•ç‰©å¡ç‰‡æ‹–æ›³åˆ°æ­£ç¢ºçš„åˆ†é¡å€åŸŸï¼š<br>
  <b>ã€Œä¸»è¦ç”¨è²éŸ³æ±‚å¶ã€</b>æˆ–<b>ã€Œä¸ç”¨è²éŸ³æ±‚å¶ã€</b>ã€‚<br>
  å…±æœ‰å…©å€‹é—œå¡ï¼Œå…¨éƒ¨é…å°æ­£ç¢ºå¾Œå¯å†ç©ä¸€æ¬¡æˆ–åˆ†äº«çµ¦æœ‹å‹ï¼
</div>

<div class="main-layout">
  <div class="dropzone" id="soundZone">ä¸»è¦ç”¨è²éŸ³æ±‚å¶</div>
  <div class="cards" id="cardsContainer">
    <!-- å‹•ç‰©å¡ç‰‡æœƒç”¨ JS ç”¢ç”Ÿ -->
  </div>
  <div class="dropzone" id="silentZone">ä¸ç”¨è²éŸ³æ±‚å¶</div>
</div>

<!-- æç¤ºçª— -->
<div class="modal" id="modal">
  <p id="modalText">æç¤ºå…§å®¹</p>
  <div id="modalBtnArea">
    <button class="btn" onclick="closeModal()">ç¹¼çºŒ</button>
  </div>
</div>

<script>
  // å‹•ç‰©è³‡æ–™é™£åˆ—
  const animals = [
    {name: "èŸ‹èŸ€", sound: true, img: "images/01.png", hint:"é›„èŸ‹èŸ€æœƒæ‘©æ“¦ç¿…è†€ç™¼å‡ºå«è²ï¼Œå¸å¼•é›Œæ€§ï¼Œé€™ç¨®è²éŸ³ä¹Ÿæ˜¯ç‰ å€‘çš„é ˜åœ°å®£ç¤ºã€‚"},
    {name: "è½æ–¯", sound: true, img: "images/02.jpg", hint:"è½æ–¯æœƒåˆ©ç”¨ç¿…è†€æ‘©æ“¦ç”¢ç”Ÿè²éŸ³ï¼Œç”¨ä¾†å‚³éæ±‚å¶çš„è¨Šæ¯ã€‚"},
    {name: "è¢ç«èŸ²", sound: false, img: "images/03.jpg", hint:"è¢ç«èŸ²ä¸é è²éŸ³ï¼Œè€Œæ˜¯ç”¨ç™¼å…‰ä¾†å‚³æƒ…ï½é–ƒçˆç¯€å¥å¯æ˜¯ç‰ å€‘çš„æµªæ¼«èªè¨€å‘¢ï¼"},
    {name: "é’è›™", sound: true, img: "images/é’è›™.png", hint:"åœ¨æ± å¡˜é‚Šè½åˆ°å‘±å‘±å«å—ï¼Ÿé‚£æ˜¯é›„é’è›™åœ¨é–‹æ¼”å”±æœƒï¼Œå¸Œæœ›å¸å¼•å¿ƒå„€çš„å°è±¡éä¾†ï¼"},
    {name: "èœœèœ‚", sound: false, img: "images/èœœèœ‚.png", hint:"èœœèœ‚çš„æ±‚å¶é çš„æ˜¯æ°£å‘³å¯†ç¢¼ï¼ˆè²»æ´›è’™ï¼‰ï¼Œä¸æ˜¯é å—¡å—¡å«ä¾†è«‡æˆ€æ„›çš„å–”ï½"},
    {name: "èŸ¬", sound: true, img: "images/06.jpg", hint:"èŸ¬æ˜¯ç¶“å…¸çš„ã€å«è²æ±‚å¶ã€æ˜†èŸ²ï¼Œé›„èŸ¬æœƒéœ‡å‹•è…¹éƒ¨çš„é¼“è†œï¼Œç™¼å‡ºå˜¹äº®é³´å«è²å¸å¼•é›ŒèŸ¬ã€‚"},
    {name: "è³è‚", sound: false, img: "images/07.jpg", hint:"é›Œè³è‚æœƒé‡‹æ”¾è²»æ´›è’™å¸å¼•é›„æ€§ï¼Œç‰ å€‘çš„æ±‚å¶è¡Œç‚ºä¸»è¦é€éæ°£å‘³èˆ‡è¦–è¦ºé€²è¡Œã€‚"},
    {name: "å¤œé·¹", sound: true, img: "images/å¤œé·¹.png", hint:"é›„é³¥æœƒåœ¨å¤œæ™šé«˜äº¢é³´å«ï¼Œç”¨è²éŸ³å±•ç¤ºæ±‚å¶æ„åœ–ã€‚"},
    {name: "é¯¨é­š", sound: true, img: "images/é¯¨é­š.png", hint:"é›„æ€§æœƒå”±å‡ºç‰¹å®šé »ç‡ï¼Œè¤‡é›œçš„é¯¨æ­Œå°±æ˜¯ç‰ å€‘å¸å¼•ç•°æ€§çš„æ–¹å¼ã€‚"},
    {name: "ä¸¹é ‚é¶´", sound: true, img: "images/ä¸¹é ‚é¶´.png", hint:"ä¸¹é ‚é¶´æœƒç™¼å‡ºå”èª¿çš„å«è²å¸å¼•ç•°æ€§ï¼Œæ¥è‘—è·³èˆï¼Œæ˜¯ç‰ å€‘ç¨ç‰¹çš„æ±‚å¶æ–¹å¼ã€‚"},
    {name: "æµ·é¦¬", sound: false, img: "images/æµ·é¦¬.png", hint:"æµ·é¦¬æœƒé€éé›™äººèˆè¹ˆå»ºç«‹æ„Ÿæƒ…ï¼Œäº¤é…å¾Œç”±é›„æ€§æ‡·å­•ä¸¦è‚²å…’ã€‚"},
    {name: "åŒ—æ¥µç†Š", sound: false, img: "images/åŒ—æ¥µç†Š.png", hint:"åŒ—æ¥µç†Šæœƒä¾è³´æ°£å‘³èˆ‡è¦–è¦ºç·šç´¢ä¾†å°‹æ‰¾é…å¶ï¼Œä¸ç™¼å‡ºæ±‚å¶è²éŸ³ã€‚"},
  ];

  const praises = [
    "ç­”å°äº†ï¼ä½ è¶…æ£’ï¼ğŸ‰",
    "æ­£ç¢ºï¼ä½ å¾ˆäº†è§£å–”ï½ğŸª²",
    "æ²’éŒ¯ï¼é€™é¡Œè¼•é¬†æ‹¿ä¸‹ ğŸ’ª",
    "è¶…å²å®³ï¼å®Œå…¨æ­£è§£ ğŸ‘",
    "ç”Ÿç‰©å°åšå£«å°±æ˜¯ä½ ï¼ğŸ§ "
  ];

  const cardsContainer = document.getElementById("cardsContainer");
  const soundZone = document.getElementById("soundZone");
  const silentZone = document.getElementById("silentZone");
  const modal = document.getElementById("modal");
  const modalText = document.getElementById("modalText");
  const modalBtnArea = document.getElementById("modalBtnArea");

  // å»ºç«‹å¡ç‰‡å…ƒç´ 
animals.forEach(animal => {
  const cardCont = document.createElement("div");
  cardCont.className = "card-container";
  cardCont.setAttribute("draggable", "true");
  cardCont.dataset.name = animal.name;
  cardCont.dataset.sound = animal.sound;

  const card = document.createElement("div");
  card.className = "card";

  const front = document.createElement("div");
  front.className = "card-front";
  front.textContent = animal.name;

  const back = document.createElement("div");
  back.className = "card-back";
  const img = document.createElement("img");
  img.src = animal.img;
  img.alt = animal.name;
  back.appendChild(img);

  card.appendChild(front);
  card.appendChild(back);
  cardCont.appendChild(card);
  cardsContainer.appendChild(cardCont);

  // æ‹–æ›³äº‹ä»¶
  cardCont.addEventListener("dragstart", e => {
    e.dataTransfer.setData("name", animal.name);
    e.dataTransfer.setData("sound", animal.sound);
    cardCont.classList.add("dragging");
    // æ‹–æ›³æ™‚è‡ªå‹•ç¿»é¢
    card.classList.add("flipped");
  });
  cardCont.addEventListener("dragend", e => {
    cardCont.classList.remove("dragging");
    // æ‹–æ›³çµæŸè‡ªå‹•ç¿»å›
    card.classList.remove("flipped");
  });

  // é»æ“Šä¹Ÿå¯ç¿»é¢
  cardCont.addEventListener("click", () => {
    card.classList.toggle("flipped");
  });
});

// dropzone æ‹–æ›³é€²å…¥èˆ‡é›¢é–‹æ•ˆæœ
[soundZone, silentZone].forEach(zone => {
  zone.addEventListener("dragover", e => {
    e.preventDefault();
    zone.style.borderColor = "#000";
    zone.classList.add("dragover");
  });
  zone.addEventListener("dragleave", e => {
    zone.style.borderColor = "#a9c4a2";
    zone.classList.remove("dragover");
  });
  zone.addEventListener("drop", e => {
    e.preventDefault();
    zone.style.borderColor = "#a9c4a2";
    zone.classList.remove("dragover");
    const name = e.dataTransfer.getData("name");
    const isSound = e.dataTransfer.getData("sound") === "true";
    const correctZone = zone.id === "soundZone";

    // æ‰¾å°æ‡‰å¡ç‰‡å…ƒç´ 
    const cardElems = Array.from(cardsContainer.children);
    const draggedCard = cardElems.find(c => c.dataset.name === name);

    if (!draggedCard) return;

    // åˆ¤æ–·ç­”æ¡ˆ
    if (isSound === correctZone) {
      // ç­”å°ï¼Œç§»é™¤æœ¬æ¬„ä½å’Œå¦ä¸€å€‹æ¬„ä½æ‰€æœ‰è©²å¡ç‰‡çš„âŒå’Œâœ”ï¸
      [soundZone, silentZone].forEach(z => {
        Array.from(z.querySelectorAll('p')).forEach(p => {
          if (p.textContent === `âŒ ${name}` || p.textContent === `âœ”ï¸ ${name}`) p.remove();
        });
      });
      // æ–°å¢âœ”ï¸åˆ°æ­£ç¢ºæ¬„ä½
      const p = document.createElement('p');
      p.textContent = `âœ”ï¸ ${name}`;
      p.setAttribute('data-name', name);
      zone.appendChild(p);
      cardsContainer.removeChild(draggedCard);
      // é¡¯ç¤ºhintï¼ˆèˆ‡å‰é¢æ–‡å­—ç©ºä¸€è¡Œï¼Œæ­£ç¢ºè™•ç†HTMLï¼‰
      const animalData = animals.find(a => a.name === name);
      if (checkAllMatched()) {
        // æœ€å¾Œä¸€å¼µå¡ç‰‡ï¼Œå¿…é ˆé»ã€Œç¹¼çºŒã€æ‰èƒ½æ¶ˆå¤±
        showModal(
          praises[Math.floor(Math.random() * praises.length)] + '\n\n' + animalData.hint,
          '<button class="btn" onclick="closeModal();showLevelModal();">ç¹¼çºŒ</button>'
        );
        return;
      } else {
        showModal(
          praises[Math.floor(Math.random() * praises.length)] + '\n\n' + animalData.hint
        );
      }
    } else {
      // ç­”éŒ¯ï¼Œå…ˆç§»é™¤è©²å¡ç‰‡çš„æ‰€æœ‰âŒå†æ–°å¢ä¸€å€‹âŒ
      Array.from(zone.querySelectorAll('p')).forEach(p => {
        if (p.textContent === `âŒ ${name}`) p.remove();
      });
      const p = document.createElement('p');
      p.textContent = `âŒ ${name}`;
      p.setAttribute('data-name', name);
      zone.appendChild(p);
      // åªé¡¯ç¤ºã€Œä¸å°å–”ï¼Œå†æƒ³æƒ³çœ‹ï¼`
      showModal('ä¸å°å–”ï¼Œå†æƒ³æƒ³çœ‹ï¼');
    }
  });
});
// æª¢æŸ¥æ˜¯å¦å…¨éƒ¨é…å°å®Œæˆ
function checkAllMatched() {
  // cardsContainer æ²’æœ‰ä»»ä½•å¡ç‰‡æ™‚ä»£è¡¨å…¨éƒ¨é…å°å®Œæˆ
  return cardsContainer.children.length === 0;
}

function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

let lastGroupIndex = 0;
let playCount = 0;
let groupOrder = [];

function resetGame() {
  // æ¸…ç©ºå…©å€‹ dropzone çš„æ‰€æœ‰ p æ¨™ç±¤ï¼ˆåªä¿ç•™æ¨™é¡Œæ–‡å­—ï¼‰
  [soundZone, silentZone].forEach(z => {
    Array.from(z.querySelectorAll('p')).forEach(p => p.remove());
  });
  // ç”¢ç”Ÿåˆ†çµ„ï¼ˆå…©é—œä¸é‡è¤‡ï¼‰
  if (groupOrder.length === 0) {
    const shuffled = animals.slice();
    shuffleArray(shuffled);
    groupOrder = [
      shuffled.slice(0, 6),
      shuffled.slice(6, 12)
    ];
  }
  // ä¾ playCount æ±ºå®šé¡¯ç¤ºå“ªä¸€çµ„
  const groupIdx = playCount % 2;
  const group = groupOrder[groupIdx];
  cardsContainer.innerHTML = '';
  group.forEach(animal => {
    const cardCont = document.createElement("div");
    cardCont.className = "card-container";
    cardCont.setAttribute("draggable", "true");
    cardCont.dataset.name = animal.name;
    cardCont.dataset.sound = animal.sound;

    const card = document.createElement("div");
    card.className = "card";

    const front = document.createElement("div");
    front.className = "card-front";
    front.textContent = animal.name;

    const back = document.createElement("div");
    back.className = "card-back";
    const img = document.createElement("img");
    img.src = animal.img;
    img.alt = animal.name;
    back.appendChild(img);

    card.appendChild(front);
    card.appendChild(back);
    cardCont.appendChild(card);
    cardsContainer.appendChild(cardCont);

    // æ‹–æ›³äº‹ä»¶
    cardCont.addEventListener("dragstart", e => {
      e.dataTransfer.setData("name", animal.name);
      e.dataTransfer.setData("sound", animal.sound);
      cardCont.classList.add("dragging");
      card.classList.add("flipped");
    });
    cardCont.addEventListener("dragend", e => {
      cardCont.classList.remove("dragging");
      card.classList.remove("flipped");
    });
    cardCont.addEventListener("click", () => {
      card.classList.toggle("flipped");
    });
  });
}

// é¦–æ¬¡è¼‰å…¥æ™‚ä¹Ÿè¦éš¨æ©Ÿ
resetGame();

  function showModal(text, customBtnsHtml) {
    // è‹¥å…§å®¹æœ‰ \nï¼Œè½‰æˆ <br> é¡¯ç¤º
    modalText.innerHTML = text.replace(/\n/g, '<br>');
    if (customBtnsHtml) {
      modalBtnArea.innerHTML = customBtnsHtml;
    } else {
      modalBtnArea.innerHTML = '<button class="btn" onclick="closeModal()">ç¹¼çºŒ</button>';
    }
    modal.style.display = "block";
  }

  function closeModal() {
    modal.style.display = "none";
  }

  function showLevelModal() {
  playCount++;
  if (playCount % 2 === 1) {
    modalText.textContent = 'æ­å–œå®Œæˆç¬¬ä¸€é—œï¼';
    modalBtnArea.innerHTML = '<button class="btn" onclick="resetGame();closeModal();">ä¸‹ä¸€é—œ</button>';
    modal.style.display = 'block';
  } else {
    modalText.textContent = 'å…¨éƒ¨é…å°æ­£ç¢ºï¼';
    modalBtnArea.innerHTML = '<div class="modal-btn-row">'
      + '<button class="btn" style="float:left" onclick="groupOrder=[];playCount=0;resetGame();closeModal();">å†ç©ä¸€æ¬¡</button>'
      + '<button class="btn" style="float:right" onclick="shareGame()">åˆ†äº«</button>'
      + '</div>';
    modal.style.display = 'block';
  }
}

  function shareGame() {
  if (navigator.share) {
    navigator.share({
      title: document.title,
      text: 'æˆ‘å®Œæˆäº†æ˜†èŸ²æ±‚å¶åˆ†é¡éŠæˆ²ï¼Œä¸€èµ·ä¾†æŒ‘æˆ°å§ï¼',
      url: window.location.href
    });
  } else {
    // å‚³çµ±è¤‡è£½é€£çµ
    const temp = document.createElement('input');
    temp.value = window.location.href;
    document.body.appendChild(temp);
    temp.select();
    document.execCommand('copy');
    document.body.removeChild(temp);
    alert('é€£çµå·²è¤‡è£½ï¼Œå¿«åˆ†äº«çµ¦æœ‹å‹å§ï¼');
  }
}
</script>
</body>
</html>
<!--
  é€™å€‹ HTML æ–‡ä»¶å¯¦ç¾äº†ä¸€å€‹æ˜†èŸ²æ±‚å¶åˆ†é¡éŠæˆ²ï¼Œä½¿ç”¨å¡ç‰‡ç¿»é¢æ•ˆæœä¾†å±•ç¤ºæ˜†èŸ²è³‡è¨Šã€‚
  ä½¿ç”¨è€…å¯ä»¥å°‡æ˜†èŸ²å¡ç‰‡æ‹–æ”¾åˆ°æ­£ç¢ºçš„æ±‚å¶æ–¹å¼å€åŸŸï¼Œç­”å°æœƒé¡¯ç¤ºæç¤ºçª—ã€‚
  å¡ç‰‡åŒ…å«æ˜†èŸ²åç¨±å’Œåœ–ç‰‡ï¼Œä¸¦ä¸”æœ‰è²éŸ³å’Œç„¡è²éŸ³çš„åˆ†é¡ã€‚
-->